{"ast":null,"code":"var _jsxFileName = \"D:\\\\Sliit\\\\New_Folder\\\\Y4_Sem_1\\\\Research Project -IT4010 - 25 July Batch\\\\Implementation\\\\SmartSolarAdvisor_25-26J-527\\\\Location_Aware_Model\\\\frontend\\\\src\\\\components\\\\LocationMap.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { MapContainer, TileLayer, Marker, useMapEvents } from \"react-leaflet\";\nimport L from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport \"../styles/LocationMap.css\";\n\n// Fix for default marker icons in React-Leaflet\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png\",\n  iconUrl: \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png\",\n  shadowUrl: \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png\"\n});\nfunction LocationMarker({\n  position,\n  onPositionChange\n}) {\n  _s();\n  const [markerPosition, setMarkerPosition] = useState(position || [7.2, 80.0]);\n  useEffect(() => {\n    if (position) {\n      setMarkerPosition(position);\n    }\n  }, [position]);\n  useMapEvents({\n    click(e) {\n      // Ensure correct order: lat, lon\n      const lat = e.latlng.lat;\n      const lon = e.latlng.lng;\n\n      // Validate coordinates\n      if (lat >= -90 && lat <= 90 && lon >= -180 && lon <= 180) {\n        const newPos = [lat, lon];\n        setMarkerPosition(newPos);\n        onPositionChange(lat, lon);\n      }\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(Marker, {\n    position: markerPosition,\n    draggable: true,\n    eventHandlers: {\n      dragend: e => {\n        const lat = e.target.getLatLng().lat;\n        const lon = e.target.getLatLng().lng;\n\n        // Validate coordinates\n        if (lat >= -90 && lat <= 90 && lon >= -180 && lon <= 180) {\n          const newPos = [lat, lon];\n          setMarkerPosition(newPos);\n          onPositionChange(lat, lon);\n        }\n      }\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n}\n_s(LocationMarker, \"7gwYgjl71cPODAHb2+hIynxWI68=\", false, function () {\n  return [useMapEvents];\n});\n_c = LocationMarker;\nfunction LocationMap({\n  latitude,\n  longitude,\n  onLocationChange,\n  height = \"400px\"\n}) {\n  _s2();\n  // Ensure proper coordinate order: [latitude, longitude]\n  // Round to 4 decimal places for display\n  const initialLat = latitude && !isNaN(latitude) && latitude >= -90 && latitude <= 90 ? Math.round(latitude * 10000) / 10000 : 7.2;\n  const initialLon = longitude && !isNaN(longitude) && longitude >= -180 && longitude <= 180 ? Math.round(longitude * 10000) / 10000 : 80.0;\n  const [mapPosition, setMapPosition] = useState([initialLat, initialLon]);\n  const [selectedLat, setSelectedLat] = useState(initialLat);\n  const [selectedLon, setSelectedLon] = useState(initialLon);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [searchResults, setSearchResults] = useState([]);\n  const [isSearching, setIsSearching] = useState(false);\n  const searchTimeoutRef = useRef(null);\n  useEffect(() => {\n    // Validate and set coordinates properly\n    const defaultLat = 7.2;\n    const defaultLon = 80.0;\n    const validLat = latitude && !isNaN(latitude) && latitude >= -90 && latitude <= 90 ? latitude : defaultLat;\n    const validLon = longitude && !isNaN(longitude) && longitude >= -180 && longitude <= 180 ? longitude : defaultLon;\n\n    // Only update if coordinates are actually different and valid\n    if (Math.abs(validLat - selectedLat) > 0.0001 || Math.abs(validLon - selectedLon) > 0.0001) {\n      setMapPosition([validLat, validLon]);\n      setSelectedLat(validLat);\n      setSelectedLon(validLon);\n    }\n  }, [latitude, longitude, selectedLat, selectedLon]);\n\n  // Cleanup timeout on unmount\n  useEffect(() => {\n    return () => {\n      if (searchTimeoutRef.current) {\n        clearTimeout(searchTimeoutRef.current);\n      }\n    };\n  }, []);\n  const handlePositionChange = (lat, lon) => {\n    // Round coordinates to 4 decimal places\n    const roundedLat = Math.round(lat * 10000) / 10000;\n    const roundedLon = Math.round(lon * 10000) / 10000;\n    setSelectedLat(roundedLat);\n    setSelectedLon(roundedLon);\n    if (onLocationChange) {\n      onLocationChange(roundedLat, roundedLon);\n    }\n  };\n  const handleGeolocate = () => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(position => {\n        const lat = position.coords.latitude;\n        const lon = position.coords.longitude;\n\n        // Validate coordinates from geolocation\n        if (lat >= -90 && lat <= 90 && lon >= -180 && lon <= 180) {\n          setMapPosition([lat, lon]);\n          setSelectedLat(lat);\n          setSelectedLon(lon);\n          if (onLocationChange) {\n            onLocationChange(lat, lon);\n          }\n        } else {\n          alert(\"Invalid coordinates received from geolocation.\");\n        }\n      }, error => {\n        alert(\"Unable to get your location. Please select manually on the map.\");\n      });\n    } else {\n      alert(\"Geolocation is not supported by your browser.\");\n    }\n  };\n  const searchLocation = async query => {\n    if (!query || query.trim().length < 3) {\n      setSearchResults([]);\n      return;\n    }\n    setIsSearching(true);\n    try {\n      // Use OpenStreetMap Nominatim API for geocoding\n      const response = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(query)}&limit=5&countrycodes=lk&accept-language=en`, {\n        headers: {\n          \"User-Agent\": \"SolarAdvisorApp/1.0\"\n        }\n      });\n      if (response.ok) {\n        const data = await response.json();\n        setSearchResults(data);\n      } else {\n        setSearchResults([]);\n      }\n    } catch (error) {\n      console.error(\"Location search error:\", error);\n      setSearchResults([]);\n    } finally {\n      setIsSearching(false);\n    }\n  };\n  const handleSearchChange = e => {\n    const query = e.target.value;\n    setSearchQuery(query);\n\n    // Debounce search\n    if (searchTimeoutRef.current) {\n      clearTimeout(searchTimeoutRef.current);\n    }\n    searchTimeoutRef.current = setTimeout(() => {\n      searchLocation(query);\n    }, 500);\n  };\n  const handleSelectLocation = result => {\n    const lat = parseFloat(result.lat);\n    const lon = parseFloat(result.lon);\n    if (!isNaN(lat) && !isNaN(lon) && lat >= -90 && lat <= 90 && lon >= -180 && lon <= 180) {\n      setMapPosition([lat, lon]);\n      setSelectedLat(lat);\n      setSelectedLon(lon);\n      setSearchQuery(result.display_name || result.name || \"\");\n      setSearchResults([]);\n      if (onLocationChange) {\n        onLocationChange(lat, lon);\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"location-map-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"map-controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"location-search-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-input-wrapper\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"location-search-input\",\n            placeholder: \"Search for a location in Sri Lanka (e.g., Colombo, Nuwara Eliya)...\",\n            value: searchQuery,\n            onChange: handleSearchChange,\n            onFocus: () => searchQuery.length >= 3 && searchLocation(searchQuery)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 13\n          }, this), isSearching && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"search-loading\",\n            children: \"\\uD83D\\uDD0D Searching...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 11\n        }, this), searchResults.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-results\",\n          children: searchResults.map((result, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"search-result-item\",\n            onClick: () => handleSelectLocation(result),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"result-name\",\n              children: result.display_name || result.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"result-coords\",\n              children: [parseFloat(result.lat).toFixed(4), \"\\xB0,\", \" \", parseFloat(result.lon).toFixed(4), \"\\xB0\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 19\n            }, this)]\n          }, idx, true, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"coordinate-inputs\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"geolocate-btn\",\n          onClick: handleGeolocate,\n          children: \"Use My Location\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"coord-display\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"Lat: \", selectedLat.toFixed(4), \"\\xB0\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"Lon: \", selectedLon.toFixed(4), \"\\xB0\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"map-wrapper\",\n      style: {\n        height\n      },\n      children: /*#__PURE__*/_jsxDEV(MapContainer, {\n        center: mapPosition,\n        zoom: 10,\n        style: {\n          height: \"100%\",\n          width: \"100%\"\n        },\n        scrollWheelZoom: true,\n        children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n          attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\",\n          url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(LocationMarker, {\n          position: mapPosition,\n          onPositionChange: handlePositionChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 234,\n    columnNumber: 5\n  }, this);\n}\n_s2(LocationMap, \"6iZUJJONWzADwA/BvI3s7ZtDmwA=\");\n_c2 = LocationMap;\nexport default LocationMap;\nvar _c, _c2;\n$RefreshReg$(_c, \"LocationMarker\");\n$RefreshReg$(_c2, \"LocationMap\");","map":{"version":3,"names":["React","useState","useEffect","useRef","MapContainer","TileLayer","Marker","useMapEvents","L","jsxDEV","_jsxDEV","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","LocationMarker","position","onPositionChange","_s","markerPosition","setMarkerPosition","click","e","lat","latlng","lon","lng","newPos","draggable","eventHandlers","dragend","target","getLatLng","fileName","_jsxFileName","lineNumber","columnNumber","_c","LocationMap","latitude","longitude","onLocationChange","height","_s2","initialLat","isNaN","Math","round","initialLon","mapPosition","setMapPosition","selectedLat","setSelectedLat","selectedLon","setSelectedLon","searchQuery","setSearchQuery","searchResults","setSearchResults","isSearching","setIsSearching","searchTimeoutRef","defaultLat","defaultLon","validLat","validLon","abs","current","clearTimeout","handlePositionChange","roundedLat","roundedLon","handleGeolocate","navigator","geolocation","getCurrentPosition","coords","alert","error","searchLocation","query","trim","length","response","fetch","encodeURIComponent","headers","ok","data","json","console","handleSearchChange","value","setTimeout","handleSelectLocation","result","parseFloat","display_name","name","className","children","type","placeholder","onChange","onFocus","map","idx","onClick","toFixed","style","center","zoom","width","scrollWheelZoom","attribution","url","_c2","$RefreshReg$"],"sources":["D:/Sliit/New_Folder/Y4_Sem_1/Research Project -IT4010 - 25 July Batch/Implementation/SmartSolarAdvisor_25-26J-527/Location_Aware_Model/frontend/src/components/LocationMap.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport { MapContainer, TileLayer, Marker, useMapEvents } from \"react-leaflet\";\r\nimport L from \"leaflet\";\r\nimport \"leaflet/dist/leaflet.css\";\r\nimport \"../styles/LocationMap.css\";\r\n\r\n// Fix for default marker icons in React-Leaflet\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\nL.Icon.Default.mergeOptions({\r\n  iconRetinaUrl:\r\n    \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png\",\r\n  iconUrl:\r\n    \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png\",\r\n  shadowUrl:\r\n    \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png\",\r\n});\r\n\r\nfunction LocationMarker({ position, onPositionChange }) {\r\n  const [markerPosition, setMarkerPosition] = useState(position || [7.2, 80.0]);\r\n\r\n  useEffect(() => {\r\n    if (position) {\r\n      setMarkerPosition(position);\r\n    }\r\n  }, [position]);\r\n\r\n  useMapEvents({\r\n    click(e) {\r\n      // Ensure correct order: lat, lon\r\n      const lat = e.latlng.lat;\r\n      const lon = e.latlng.lng;\r\n\r\n      // Validate coordinates\r\n      if (lat >= -90 && lat <= 90 && lon >= -180 && lon <= 180) {\r\n        const newPos = [lat, lon];\r\n        setMarkerPosition(newPos);\r\n        onPositionChange(lat, lon);\r\n      }\r\n    },\r\n  });\r\n\r\n  return (\r\n    <Marker\r\n      position={markerPosition}\r\n      draggable={true}\r\n      eventHandlers={{\r\n        dragend: (e) => {\r\n          const lat = e.target.getLatLng().lat;\r\n          const lon = e.target.getLatLng().lng;\r\n\r\n          // Validate coordinates\r\n          if (lat >= -90 && lat <= 90 && lon >= -180 && lon <= 180) {\r\n            const newPos = [lat, lon];\r\n            setMarkerPosition(newPos);\r\n            onPositionChange(lat, lon);\r\n          }\r\n        },\r\n      }}\r\n    />\r\n  );\r\n}\r\n\r\nfunction LocationMap({\r\n  latitude,\r\n  longitude,\r\n  onLocationChange,\r\n  height = \"400px\",\r\n}) {\r\n  // Ensure proper coordinate order: [latitude, longitude]\r\n  // Round to 4 decimal places for display\r\n  const initialLat =\r\n    latitude && !isNaN(latitude) && latitude >= -90 && latitude <= 90\r\n      ? Math.round(latitude * 10000) / 10000\r\n      : 7.2;\r\n  const initialLon =\r\n    longitude && !isNaN(longitude) && longitude >= -180 && longitude <= 180\r\n      ? Math.round(longitude * 10000) / 10000\r\n      : 80.0;\r\n\r\n  const [mapPosition, setMapPosition] = useState([initialLat, initialLon]);\r\n  const [selectedLat, setSelectedLat] = useState(initialLat);\r\n  const [selectedLon, setSelectedLon] = useState(initialLon);\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [searchResults, setSearchResults] = useState([]);\r\n  const [isSearching, setIsSearching] = useState(false);\r\n  const searchTimeoutRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    // Validate and set coordinates properly\r\n    const defaultLat = 7.2;\r\n    const defaultLon = 80.0;\r\n    const validLat =\r\n      latitude && !isNaN(latitude) && latitude >= -90 && latitude <= 90\r\n        ? latitude\r\n        : defaultLat;\r\n    const validLon =\r\n      longitude && !isNaN(longitude) && longitude >= -180 && longitude <= 180\r\n        ? longitude\r\n        : defaultLon;\r\n\r\n    // Only update if coordinates are actually different and valid\r\n    if (\r\n      Math.abs(validLat - selectedLat) > 0.0001 ||\r\n      Math.abs(validLon - selectedLon) > 0.0001\r\n    ) {\r\n      setMapPosition([validLat, validLon]);\r\n      setSelectedLat(validLat);\r\n      setSelectedLon(validLon);\r\n    }\r\n  }, [latitude, longitude, selectedLat, selectedLon]);\r\n\r\n  // Cleanup timeout on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      if (searchTimeoutRef.current) {\r\n        clearTimeout(searchTimeoutRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  const handlePositionChange = (lat, lon) => {\r\n    // Round coordinates to 4 decimal places\r\n    const roundedLat = Math.round(lat * 10000) / 10000;\r\n    const roundedLon = Math.round(lon * 10000) / 10000;\r\n    setSelectedLat(roundedLat);\r\n    setSelectedLon(roundedLon);\r\n    if (onLocationChange) {\r\n      onLocationChange(roundedLat, roundedLon);\r\n    }\r\n  };\r\n\r\n  const handleGeolocate = () => {\r\n    if (navigator.geolocation) {\r\n      navigator.geolocation.getCurrentPosition(\r\n        (position) => {\r\n          const lat = position.coords.latitude;\r\n          const lon = position.coords.longitude;\r\n\r\n          // Validate coordinates from geolocation\r\n          if (lat >= -90 && lat <= 90 && lon >= -180 && lon <= 180) {\r\n            setMapPosition([lat, lon]);\r\n            setSelectedLat(lat);\r\n            setSelectedLon(lon);\r\n            if (onLocationChange) {\r\n              onLocationChange(lat, lon);\r\n            }\r\n          } else {\r\n            alert(\"Invalid coordinates received from geolocation.\");\r\n          }\r\n        },\r\n        (error) => {\r\n          alert(\r\n            \"Unable to get your location. Please select manually on the map.\"\r\n          );\r\n        }\r\n      );\r\n    } else {\r\n      alert(\"Geolocation is not supported by your browser.\");\r\n    }\r\n  };\r\n\r\n  const searchLocation = async (query) => {\r\n    if (!query || query.trim().length < 3) {\r\n      setSearchResults([]);\r\n      return;\r\n    }\r\n\r\n    setIsSearching(true);\r\n    try {\r\n      // Use OpenStreetMap Nominatim API for geocoding\r\n      const response = await fetch(\r\n        `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(\r\n          query\r\n        )}&limit=5&countrycodes=lk&accept-language=en`,\r\n        {\r\n          headers: {\r\n            \"User-Agent\": \"SolarAdvisorApp/1.0\",\r\n          },\r\n        }\r\n      );\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setSearchResults(data);\r\n      } else {\r\n        setSearchResults([]);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Location search error:\", error);\r\n      setSearchResults([]);\r\n    } finally {\r\n      setIsSearching(false);\r\n    }\r\n  };\r\n\r\n  const handleSearchChange = (e) => {\r\n    const query = e.target.value;\r\n    setSearchQuery(query);\r\n\r\n    // Debounce search\r\n    if (searchTimeoutRef.current) {\r\n      clearTimeout(searchTimeoutRef.current);\r\n    }\r\n\r\n    searchTimeoutRef.current = setTimeout(() => {\r\n      searchLocation(query);\r\n    }, 500);\r\n  };\r\n\r\n  const handleSelectLocation = (result) => {\r\n    const lat = parseFloat(result.lat);\r\n    const lon = parseFloat(result.lon);\r\n\r\n    if (\r\n      !isNaN(lat) &&\r\n      !isNaN(lon) &&\r\n      lat >= -90 &&\r\n      lat <= 90 &&\r\n      lon >= -180 &&\r\n      lon <= 180\r\n    ) {\r\n      setMapPosition([lat, lon]);\r\n      setSelectedLat(lat);\r\n      setSelectedLon(lon);\r\n      setSearchQuery(result.display_name || result.name || \"\");\r\n      setSearchResults([]);\r\n      if (onLocationChange) {\r\n        onLocationChange(lat, lon);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"location-map-container\">\r\n      <div className=\"map-controls\">\r\n        <div className=\"location-search-container\">\r\n          <div className=\"search-input-wrapper\">\r\n            <input\r\n              type=\"text\"\r\n              className=\"location-search-input\"\r\n              placeholder=\"Search for a location in Sri Lanka (e.g., Colombo, Nuwara Eliya)...\"\r\n              value={searchQuery}\r\n              onChange={handleSearchChange}\r\n              onFocus={() =>\r\n                searchQuery.length >= 3 && searchLocation(searchQuery)\r\n              }\r\n            />\r\n            {isSearching && (\r\n              <span className=\"search-loading\">üîç Searching...</span>\r\n            )}\r\n          </div>\r\n          {searchResults.length > 0 && (\r\n            <div className=\"search-results\">\r\n              {searchResults.map((result, idx) => (\r\n                <div\r\n                  key={idx}\r\n                  className=\"search-result-item\"\r\n                  onClick={() => handleSelectLocation(result)}\r\n                >\r\n                  <div className=\"result-name\">\r\n                    {result.display_name || result.name}\r\n                  </div>\r\n                  <div className=\"result-coords\">\r\n                    {parseFloat(result.lat).toFixed(4)}¬∞,{\" \"}\r\n                    {parseFloat(result.lon).toFixed(4)}¬∞\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className=\"coordinate-inputs\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"geolocate-btn\"\r\n            onClick={handleGeolocate}\r\n          >\r\n            Use My Location\r\n          </button>\r\n          <div className=\"coord-display\">\r\n            <span>Lat: {selectedLat.toFixed(4)}¬∞</span>\r\n            <span>Lon: {selectedLon.toFixed(4)}¬∞</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"map-wrapper\" style={{ height }}>\r\n        <MapContainer\r\n          center={mapPosition}\r\n          zoom={10}\r\n          style={{ height: \"100%\", width: \"100%\" }}\r\n          scrollWheelZoom={true}\r\n        >\r\n          <TileLayer\r\n            attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n          />\r\n          <LocationMarker\r\n            position={mapPosition}\r\n            onPositionChange={handlePositionChange}\r\n          />\r\n        </MapContainer>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LocationMap;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}